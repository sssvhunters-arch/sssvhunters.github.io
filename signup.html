<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SSSV Hunters | Create Account</title>

<style>

body{
margin:0;
font-family:Arial;
background:url("bg.jpg") no-repeat center center/cover;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
}

.card{
background:rgba(255,255,255,0.95);
padding:40px;
width:400px;
border-radius:12px;
box-shadow:0 10px 40px rgba(0,0,0,0.25);
}

h2{
text-align:center;
margin-bottom:20px;
color:#1e3c72;
}

input{
width:100%;
padding:12px;
margin:10px 0;
border-radius:6px;
border:1px solid #ccc;
}

button{
width:100%;
padding:12px;
background:#1e3c72;
color:white;
border:none;
border-radius:6px;
font-weight:bold;
cursor:pointer;
}

button:hover{
background:#16305c;
}

.msg{
text-align:center;
margin-top:10px;
color:red;
}

.success{
color:green;
}

a{
color:#1e3c72;
font-weight:bold;
}

</style>
</head>

<body>

<div class="card">

<h2>SSSV Hunters Signup</h2>

<input id="name" placeholder="Full Name">
<input id="email" type="email" placeholder="Email Address">
<input id="password" type="password" placeholder="Password">

<button id="signupBtn">Create Secure Account</button>

<p class="msg" id="message"></p>

<p style="text-align:center;margin-top:15px;">
Already registered?
<a href="login.html">Login</a>
</p>

</div>

<script type="module">

import { initializeApp }
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";

import {
getAuth,
createUserWithEmailAndPassword,
sendEmailVerification,
signOut
}
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

import {
getFirestore,
doc,
setDoc,
serverTimestamp
}
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

/* ðŸ”¥ PUT YOUR REAL CONFIG */
const firebaseConfig={
apiKey: "AIzaSyCseBuz6XomVg_R1s3eLk0WBjvf2pGW8po",
  authDomain: "sssvhunters-jobboard.firebaseapp.com",
  projectId: "sssvhunters-jobboard",
  storageBucket: "sssvhunters-jobboard.firebasestorage.app",
  messagingSenderId: "724150870358",
  appId: "1:724150870358:web:901c334ce94d530aefb6f7",
  measurementId: "G-M1R2YQTW20"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);

const message=document.getElementById("message");

function strongPassword(password){
return /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&]).{8,}$/.test(password);
}

document.getElementById("signupBtn")
.addEventListener("click",async()=>{

const name=document.getElementById("name").value.trim();
const email=document.getElementById("email").value.trim();
const password=document.getElementById("password").value.trim();

message.innerText="";

if(!name || !email || !password){
message.innerText="All fields required.";
return;
}

if(!strongPassword(password)){
message.innerText=
"Password must contain uppercase, lowercase, number & symbol.";
return;
}

try{

const userCred=
await createUserWithEmailAndPassword(auth,email,password);

await sendEmailVerification(userCred.user);

/* STORE USER ROLE */
await setDoc(doc(db,"users",userCred.user.uid),{
name:name,
email:email,
role:"candidate",
createdAt:serverTimestamp()
});

await signOut(auth);

message.classList.add("success");
message.innerText=
"Account created âœ… Verify email before login.";

}catch(err){
message.innerText="Signup failed.";
}

});

</script>

</body>
</html>
